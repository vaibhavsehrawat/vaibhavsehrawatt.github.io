<html>

<body>
    <button id="write-btn">Write key 'window-entry' with value 'window-value' to localstorage</button>
    <div style="margin-top: 20px;">Local Storage Values:</div>
    <div id="ls-last-check-timestamp"></div>
    <div id="ls-box" style="white-space: pre;"></div>
    <script>
        const lsBox = document.getElementById('ls-box');
        const lsLastCheckTimestamp = document.getElementById('ls-last-check-timestamp');

        window.setInterval(() => {
            const ls = handle.localStorage;
            lsLastCheckTimestamp.innerText = `Last checked: ${new Date().toLocaleTimeString()}`;
            const lsContents = Object.keys(ls).reduce((acc, key) => {
                acc[key] = ls[key];
                return acc;
            }, {});
            lsBox.innerText = JSON.stringify(lsContents, null, 4);
        }, 1000);

        const writeBtn = document.getElementById('write-btn');
        writeBtn.addEventListener('click', () => {
            handle.localStorage.setItem('window-entry', `window-value-${Date.now()}`);
        });
    </script>
</body>

</html>
